{% extends 'CivixFrontBundle::layout.html.twig' %}

{% block page_title %}Posts marked as spam{% endblock %}

{% block content %}
<section>
    <div class="row-fluid">
        <div class="span12">
            <h3>Manage posts</h3>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span12">
            <table class="table table-striped table-bordered">
                <thead>
                <tr>
                    {# sorting of properties based on query components #}
                    <th>{{ knp_pagination_sortable(pagination, 'Id', 'p.id') }}</th>
                    <th>User Name</th>
                    <th>Official Group Title</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                {% for post in pagination %}
                    <tr>
                        <td>{{ post.id }}</td>
                        <td>
                            <a href="{{ path('civix_front_superuser_user_posts', {id: post.user.id}) }}">
                                {{ post.user.firstname }} {{ post.user.lastname }}
                            </a>
                        </td>
                        <td>{{ post.group.officialTitle }}</td>
                        <td>
                            {% if post.spamMarks.count() >= 4 %}
                            <form class="form-link" action="{{ path('civix_front_superuser_post_delete', {'id': post.id}) }}" method="POST">
                                <input type="hidden" name="_token" value="{{ csrf_token('post_delete') }}">
                                <button type="submit" class="btn-link">
                                    <i class="glyphicon glyphicon-remove"></i>
                                    Remove post
                                </button>
                            </form>
                            {% endif %}
                            <form class="form-link" action="{{ path('civix_front_user_delete', {'id': post.user.id}) }}" method="POST">
                                <input type="hidden" name="_token" value="{{ csrf_token('user_delete') }}">
                                <button type="submit" class="btn-link">
                                    <i class="glyphicon glyphicon-remove"></i>
                                    Remove user
                                </button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            {# display navigation #}
            <div class="navigation">
                {{ knp_pagination_render(pagination) }}
            </div>
        </div>
    </div>
</section>
{% endblock %}
